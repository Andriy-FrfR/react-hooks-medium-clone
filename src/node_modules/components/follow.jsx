import useFetch from 'hooks/useFetch';

const Follow = ({ username, following }) => {
  const apiUrl = `/profiles/${username}/follow`;
  const [{ response }, doFetch] = useFetch(apiUrl);
  const followingWithResponse = response
    ? response.profile.following
    : following;

  const followHandler = () => {
    doFetch({
      method: followingWithResponse ? 'delete' : 'post',
    });
  };

  return (
    <button
      className="btn btn-sm action-btn btn-outline-secondary"
      onClick={followHandler}
    >
      <i className="ion-plus-round" />
      &nbsp;
      {followingWithResponse ? `Unfollow ${username}` : `Follow ${username}`}
    </button>
  );
};

export default Follow;
